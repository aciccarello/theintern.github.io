<!DOCTYPE html>
<html class="html-fixed">
		<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	<link rel="shortcut icon" href="/favicon.ico">
	<link rel="stylesheet" href="/styles/style.css">
	<title>Intern. Software testing for humans.</title>
</head>

	<body class="page-docs page-secondary">
		<header class="header">
	<div class="container">
		<nav class="navbar">
			<div class="navbar-brand">
				<a href="/" class="navbar-item"><img src="/images/intern-logo.svg" class="site-logo" alt="The Intern"></a>
				<div class="navbar-burger">
					<span></span>
					<span></span>
					<span></span>
				</div>
			</div>
			<div class="navbar-menu">
				<div class="navbar-start"></div>
				<div class="navbar-end">
					<a class="navbar-item" href="/docs">Docs</a>
					<a class="navbar-item" href="https://github.com/theintern/intern" data-title="">Github</a>
				</div>
			</div>
		</nav>
	</div>
</header>
		<div class="columns docs-layout">
			<div class="column docs-column docs-nav">
				
			</div>
			<div class="column is-10 docs-column docs-content">
				<h1>Intern tutorial</h1>
<p>In this tutorial we will walk through how to set up Intern and how to write tests and run tests. This repository contains a very basic Hello World demo “application” that we’ll be using as an example to build on. In order to complete this tutorial, you will need the following:</p>
<ul>
<li>A Bourne-compatible shell, like bash or zsh (or knowledge of how to execute equivalent commands in your environment)</li>
<li><a href="https://git-scm.com/">Git</a></li>
<li><a href="https://nodejs.org/">Node 4.0.0+</a> and <a href="https://www.npmjs.com/package/npm">npm 5.3.0+</a></li>
<li><a href="https://java.com/">Java 1.8+</a> (for running a local Selenium server)</li>
<li>A <a href="https://www.browserstack.com/users/sign_up">free BrowserStack Automate trial account</a></li>
</ul>
<p>Once you have all the necessary prerequisites, download the demo application by cloning this repository and installing the dependencies:</p>
<pre><code class="hljs language-bash">git <span class="hljs-built_in">clone</span> https://github.com/theintern/intern-tutorial.git
<span class="hljs-built_in">cd</span> intern-tutorial
npm install
</code></pre>
<p>The application itself consists of a basic HTML page and a single “app” package written in TypeScript. Several <code>npm</code> scripts have been provided to simplify the building and testing processes:</p>
<ul>
<li><code>npm run compile</code> - runs the TypeScript compiler once</li>
<li><code>npm run compile:watch</code> - runs the TypeScript compiler in watch mode (runs the compiler, waits for changes, and re-compiles when changes are detected)</li>
<li><code>npm run copy</code> - copies any assets from <code>src</code> to <code>_dist/src</code></li>
<li><code>npm run copy:watch</code> - watches for changes to assets in <code>src</code> and copies files to <code>_src/dist</code> when changes are detected</li>
<li><code>npm run build</code> - runs <code>npm run compile</code> and <code>npm run copy</code> in parallel</li>
<li><code>npm run build:watch</code> - runs <code>npm run compile:watch</code> and <code>npm run copy:watch</code> in parallel</li>
<li><code>npm test</code> - builds the application and runs Intern</li>
</ul>
<p><em>In order for the demo application to work properly during the tutorial, make sure that you access it using a real web server. Like most applications, it will not work from a <code>file:</code> URL due to cross-protocol browser security restrictions.</em></p>
<h2>What can Intern test?</h2>
<p>Intern can test all sorts of things:</p>
<ul>
<li>Plain JavaScript code, in any module format (or no module format!)</li>
<li>Web pages generated by server-side languages like Java, PHP, or Ruby</li>
<li>Native or hybrid iOS, Android, and Firefox OS applications</li>
</ul>
<p>Intern is minimally prescriptive and enforces only a basic set of best practices designed to ensure your tests stay maintainable over time. Its extensible architecture allows you to write custom test interfaces, executors, and reporters to influence how your tests run and easily integrate with your existing coding environment.</p>
<p>Unlike most other testing systems, Intern also supports two different types of testing: unit testing and functional testing. <strong>Unit testing</strong> works by executing code directly and inspecting the result, such as calling a function and then checking that it returns an expected value. <strong>Functional testing</strong> works by mimicking user interaction with a browser by issuing commands through a WebDriver server (an executable that lets testing tools interact with a browser).</p>
<p>This is a powerful notion: Intern allows us to test <em>code</em> with regular unit tests, but also allows us to test <em>functionality</em> by mimicking user interaction with the browser.</p>
<h2>Step 1: Download Intern</h2>
<p>Intern is distributed as an <a href="https://npmjs.org/package/intern">npm package</a> so it can be easily added as a dependency to any JavaScript project. We’ll install Intern using <code>npm install --save-dev</code> so that npm adds it automatically as a development dependency to application’s <a href="https://npmjs.org/doc/json.html">package.json</a>:</p>
<pre><code class="hljs language-bash">npm install --save-dev intern@next
</code></pre>
<p>We also need to tell TypeScript to load Intern’s and SystemJS’s type definitions by default. Add the following to the <code>&quot;compilerOptions&quot;</code> object in <code>tsconfig.json</code>:</p>
<pre><code class="hljs language-json">    <span class="hljs-string">"typeRoots"</span>: [
        <span class="hljs-string">"./node_modules/@types"</span>,
        <span class="hljs-string">"./node_modules/intern/types"</span>
    ],
    <span class="hljs-string">"types"</span>: [
        <span class="hljs-string">"intern"</span>,
        <span class="hljs-string">"systemjs"</span>
    ]
</code></pre>
<p>That’s it! Installation is complete.</p>
<h2>Step 2: Configure Intern</h2>
<p>Intern needs to be configured so it can find and run our tests. This is done by creating an Intern configuration file named <code>intern.json</code> at the root of our project:</p>
<pre><code class="hljs language-json">{
    <span class="hljs-attr">"browser"</span>: {
        <span class="hljs-attr">"loader"</span>: {
            <span class="hljs-attr">"script"</span>: <span class="hljs-string">"systemjs"</span>
        },
        <span class="hljs-attr">"plugins"</span>: <span class="hljs-string">"_dist/src/system.config.js"</span>
    },
    <span class="hljs-attr">"environments"</span>: { <span class="hljs-attr">"browserName"</span>: <span class="hljs-string">"chrome"</span> }
}
</code></pre>
<p>This configuration tells Intern that, in the browser, we want to use SystemJS to load modules, and that we want to load a plugin to configure SystemJS. It also tells Intern that, in addition to running our unit tests in Node.js, we want to run our tests in Chrome. You can find descriptions of all the possible settings in <a href="https://github.com/theintern/intern/blob/master/docs/configuration.md">the Configuration section of the Intern documentation</a>.</p>
<p>We’ll be doing a little more configuration shortly when we start adding tests, but for now, we already have a complete configuration. You can verify that everything is working by running Intern:</p>
<pre><code class="hljs language-bash">npm <span class="hljs-built_in">test</span>
</code></pre>
<p>It should output:</p>
<pre><code class="hljs">No unit test coverage for <span class="hljs-keyword">node</span>
node:<span class="hljs-title"> 0</span> passed, <span class="hljs-number">0</span> failed
</code></pre>
<p>Now that we’ve configured Intern, we need to create a test module which will contain the actual tests for our application.</p>
<h2>Step 3: Write a unit test</h2>
<p>There are a variety of syntaxes used to write unit tests, and Intern comes with built-in support for several of them, including <a href="https://github.com/theintern/intern/blob/master/docs/writing_tests.md#tdd">TDD</a>, <a href="https://github.com/theintern/intern/blob/master/docs/writing_tests.md#bdd">BDD</a>, and <a href="https://github.com/theintern/intern/blob/master/docs/writing_tests.md#object">object</a>. In this tutorial, we will use the <strong>TDD</strong> syntax, but this is an individual preference. All of these interfaces support the same basic functionality, so pick whichever one you think is the clearest when you start writing your own tests!</p>
<p>Before getting any further into writing tests, we need to take a moment to review the terminology that is used by Intern:</p>
<ul>
<li>An <strong>assertion</strong> is a function call that verifies that a variable contains (or a function returns) an expected value (e.g. <code>assert.isTrue(someVariable)</code>)</li>
<li>A <strong>test interface</strong> is a programming interface for registering tests with Intern</li>
<li>A <strong>test case</strong> (or, just <strong>test</strong>) is a function that makes calls to application code and makes assertions about what it should have done</li>
<li>A <strong>test suite</strong> is a collection of tests (and, optionally, sub-suites) that are related to each other</li>
<li>A <strong>test module</strong> is a JavaScript module that contains test suites</li>
</ul>
<p>These pieces can be visualized in a hierarchy, like this:</p>
<ul>
<li>test module
<ul>
<li>test suite
<ul>
<li>test suite
<ul>
<li>test case
<ul>
<li>...</li>
</ul>
</li>
<li>...</li>
</ul>
</li>
<li>test case
<ul>
<li>assertion</li>
<li>assertion</li>
<li>...</li>
</ul>
</li>
<li>...</li>
</ul>
</li>
<li>test suite</li>
<li>...</li>
</ul>
</li>
<li>test module</li>
<li>...</li>
</ul>
<p>Test modules are typically split up so that there’s one test module for each corresponding code module being tested. First, create a new subdirectory for storing all of the unit tests:</p>
<pre><code class="hljs language-bash">mkdir -p tests/unit
</code></pre>
<p>We have one code module in our demo app (<code>app/hello</code>), so we’ll create a new unit test module at <code>intern-tutorial/tests/unit/hello.ts</code> and put the following boilerplate into it:</p>
<pre><code class="hljs language-typescript"><span class="hljs-keyword">const</span> { suite, test } = intern.getInterface(<span class="hljs-string">'tdd'</span>);
<span class="hljs-keyword">const</span> { assert } = intern.getPlugin(<span class="hljs-string">'chai'</span>);

<span class="hljs-keyword">import</span> { greet } <span class="hljs-keyword">from</span> <span class="hljs-string">'../../src/app/hello'</span>;
</code></pre>
<p>This bit of code loads the <code>suite</code> and <code>test</code> functions from the TDD test interface, the <code>assert</code> function of <a href="http://chaijs.com/api/assert/">Chai</a>, and the <code>greet</code> function we want to test.</p>
<p>Now that the basics of our <code>hello</code> test module are in place, the next step is to use <code>suite</code> to register a test suite and <code>test</code> to register a test case for our app. We’ll start by testing the <code>greet</code> function.</p>
<p>Looking at the source code for <code>app/hello</code>, we can see that when <code>greet</code> is called it will return the string <code>&quot;Hello, world!&quot;</code> if no name is passed, or <code>&quot;Hello, &lt;name&gt;!&quot;</code> if a name is passed. We need to make sure we test both of these code branches. If we’ve done it right, our test code will end up looking something like this:</p>
<pre><code class="hljs language-typescript"><span class="hljs-keyword">const</span> { suite, test } = intern.getInterface(<span class="hljs-string">'tdd'</span>);
<span class="hljs-keyword">const</span> { assert } = intern.getPlugin(<span class="hljs-string">'chai'</span>);

<span class="hljs-keyword">import</span> { greet } <span class="hljs-keyword">from</span> <span class="hljs-string">'../../src/app/hello'</span>;

suite(<span class="hljs-string">'hello'</span>, <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
    test(<span class="hljs-string">'greet'</span>, <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
        assert.strictEqual(greet(<span class="hljs-string">'Murray'</span>), <span class="hljs-string">'Hello, Murray!'</span>,
            <span class="hljs-string">'greet should return a greeting for the person named in the first argument'</span>);
        assert.strictEqual(greet(), <span class="hljs-string">'Hello, world!'</span>,
            <span class="hljs-string">'greet with no arguments should return a greeting to "world"'</span>);
    });
});
</code></pre>
<p><em>Note: This example test uses <code>assert.strictEqual</code>, which is just one of many available assertions. For a complete list of available methods, see the <a href="http://chaijs.com/api/">Chai documentation</a>.</em></p>
<p>In this test module, we’ve registered a new suite for our <code>hello</code> module and named it “hello”, written a new test case for the <code>greet</code> method and named it “greet”, and added two assertions: one where we call <code>greet</code> and pass an argument, and one where we call <code>greet</code> without any argument. If either of these assertions fails, they will throw an error and the test case will be considered failed at that point.</p>
<p>Each of our assertions also contains a message that describes what logic the assertion is actually checking. Similar to good code comments that describe <em>why</em> a piece of code exists, these messages are used to describe the intent of the code being checked rather than simply describing the assertion. For instance, “Calling greet('Murray') should return &quot;Hello, Murray!&quot;” would be a bad assertion message because it just describes what the assertion is doing, rather than describing the desired outcome. With the message we’ve used in the code above, if the <code>greet</code> function were changed in the future to return <code>&quot;Hi, &lt;name&gt;!&quot;</code> instead, it would be clear that the test itself needed to be updated because the code still fulfills the described business logic. Similarly, if the method were changed to return <code>&quot;You suck, &lt;name&gt;!&quot;</code> instead, it would then be clear that the application code was updated incorrectly.</p>
<p>The final step when writing a new test module is to add the <strong>compiled</strong> module‘s path to our configuration file so that it is loaded when we run Intern. To do this, add a <code>suites</code> property to the top-level object of <code>intern.json</code> with the string <code>&quot;_dist/tests/unit/hello.js&quot;</code>:</p>
<pre><code class="hljs language-json"><span class="hljs-string">"suites"</span>: <span class="hljs-string">"_dist/tests/unit/hello.js"</span>,
</code></pre>
<p>Now if we go back and run the same <code>npm test</code> command from the end of Step 2, we should see our tests running (and passing) in both Node.js and Chrome:</p>
<pre><code class="hljs">Listening <span class="hljs-keyword">on</span> localhost:9000 (ws 9001)
Tunnel started
✓ node - hello - greet (0.001s)
<span class="hljs-keyword">No</span> unit <span class="hljs-keyword">test</span> coverage <span class="hljs-keyword">for</span> node
node: 1 passed, 0 failed

‣ Created remote session chrome 59.0.3071.115 <span class="hljs-keyword">on</span> <span class="hljs-keyword">MAC</span> (714dfe2b-ebc0-4249-b235-a3756d004fc8)
✓ chrome 59.0.3071.115 <span class="hljs-keyword">on</span> <span class="hljs-keyword">MAC</span> - hello - greet (0.001s)
<span class="hljs-keyword">No</span> unit <span class="hljs-keyword">test</span> coverage <span class="hljs-keyword">for</span> chrome 59.0.3071.115 <span class="hljs-keyword">on</span> <span class="hljs-keyword">MAC</span>
chrome 59.0.3071.115 <span class="hljs-keyword">on</span> <span class="hljs-keyword">MAC</span>: 1 passed, 0 failed
<span class="hljs-keyword">TOTAL</span>: tested 2 platforms, 2 passed, 0 failed
</code></pre>
<p>These same tests can be run directly within a Web browser by running <code>npm test serveOnly</code> and navigating to <code>http://localhost:9000/__intern/index.html</code>.</p>
<h2>Step 4: Write a functional test</h2>
<p>Functional tests are different from unit tests in that they <em>mimic user interaction</em> by sending commands to browsers using an external server instead of running directly in the environment being tested. This enables us to generate real DOM events and test UI interactions just like a real user, with no JavaScript security sandbox limitations. As well as enabling testing of sandbox-restricted actions like file uploads, functional testing also allows us to test interactions that span multiple pages and interactions with third party sites (like OAuth authorization flows). Our demo app contains an HTML file with a basic form that should display a greeting using <code>app/hello.greet</code>. For this tutorial, we’ll simulate a user filling out a form and clicking a button to submit it in order to verify this page works as expected.</p>
<p>Intern’s functional testing is based on the <a href="http://www.w3.org/TR/webdriver/">standard WebDriver protocol</a> and comes with built-in support for remote testing services as well as <a href="http://docs.seleniumhq.org/docs/03_webdriver.jsp#running-standalone-selenium-server-for-use-with-remotedrivers">self-hosted WebDriver servers</a>. The rest of this tutorial assumes you are using BrowserStack.</p>
<p>To get started, create a new directory to hold the functional tests (in order to differentiate them from our normal unit tests) at <code>intern-tutorial/tests/functional</code>:</p>
<pre><code class="hljs language-bash">mkdir -p tests/functional
</code></pre>
<p>Next, create a test module at <code>intern-tutorial/tests/functional/index.ts</code> with the following boilerplate:</p>
<pre><code class="hljs language-typescript"><span class="hljs-keyword">const</span> { suite, test, before } = intern.getInterface(<span class="hljs-string">'tdd'</span>);
<span class="hljs-keyword">const</span> { assert } = intern.getPlugin(<span class="hljs-string">'chai'</span>);

suite(<span class="hljs-string">'index'</span>, <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
    before(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
    });

    test(<span class="hljs-string">'greeting form'</span>, <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
    });
});
</code></pre>
<p>Just like the unit test we created before, we’re using the object test interface and assert-style assertions. However, instead of loading any application code directly, we’ll be using WebDriver to load our page in the browser.</p>
<p>To facilitate functional testing, an object is passed to every lifecycle and test function which has a <code>remote</code> property. The <code>remote</code> property exposes an object that provides an interface for interacting with the remote browser environment. Using the methods on <code>remote</code>, we can load a Web page, interact with it, and retrieve data from it to assert that our actions caused the expected result. Since all calls to the remote browser are asynchronous, all methods of the <code>remote</code> object return promises. This allows us to either chain commands (like jQuery) and retrieve results using standard promises-style <code>then</code> calls or use async/await to write synchronous-looking tests. When we make a call, it is enqueued and executed once all the previous commands have completed. If this description is a little confusing, don’t worry — it should be clearer once we look at some code.</p>
<p>Looking at the HTML page at <code>index.html</code>, we can see that it consists of a simple form with a single input. It loads <code>app/main</code> which sets up our event listeners and adds a CSS class of “loaded” to the body element. We want to make sure this form works properly by testing interaction like a real user: focusing the input, typing a string, and clicking submit. We can then verify that the greeting was properly updated. Once finished, this test will look something like this:</p>
<pre><code class="hljs language-typescript"><span class="hljs-keyword">const</span> { suite, test, before } = intern.getInterface(<span class="hljs-string">'tdd'</span>);
<span class="hljs-keyword">const</span> { assert } = intern.getPlugin(<span class="hljs-string">'chai'</span>);

suite(<span class="hljs-string">'index'</span>, <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
    before(<span class="hljs-function">(<span class="hljs-params">{ remote }</span>) =&gt;</span> {
        <span class="hljs-keyword">return</span> remote
            .get(<span class="hljs-string">'_dist/src/index.html'</span>)
            .setFindTimeout(<span class="hljs-number">5000</span>)
            .findDisplayedByCssSelector(<span class="hljs-string">'body.loaded'</span>)
        ;
    });

    test(<span class="hljs-string">'greeting form'</span>, <span class="hljs-function">(<span class="hljs-params">{ remote }</span>) =&gt;</span> {
        <span class="hljs-keyword">return</span> remote
            .findById(<span class="hljs-string">'nameField'</span>)
            .click()
            .type(<span class="hljs-string">'Elaine'</span>)
            .end()

            .findByCssSelector(<span class="hljs-string">'#loginForm input[type=submit]'</span>)
            .click()
            .end()

            .findById(<span class="hljs-string">'greeting'</span>)
            .getVisibleText()
            .then(<span class="hljs-function">(<span class="hljs-params">text</span>) =&gt;</span> {
                assert.strictEqual(text, <span class="hljs-string">'Hello, Elaine!'</span>,
                    <span class="hljs-string">'Greeting should be displayed when the form is submitted'</span>);
            })
        ;
    });
});
</code></pre>
<p>It could also be written using async/await:</p>
<pre><code class="hljs language-typescript"><span class="hljs-keyword">const</span> { suite, test, before } = intern.getInterface(<span class="hljs-string">'tdd'</span>);
<span class="hljs-keyword">const</span> { assert } = intern.getPlugin(<span class="hljs-string">'chai'</span>);

suite(<span class="hljs-string">'index'</span>, <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
    before(<span class="hljs-keyword">async</span> ({ remote }) =&gt; {
        <span class="hljs-keyword">await</span> remote.get(<span class="hljs-string">'_dist/src/index.html'</span>);
        <span class="hljs-keyword">await</span> remote.setFindTimeout(<span class="hljs-number">5000</span>);
        <span class="hljs-keyword">await</span> remote.findDisplayedByCssSelector(<span class="hljs-string">'body.loaded'</span>);
    });

    test(<span class="hljs-string">'greeting form'</span>, <span class="hljs-keyword">async</span> ({ remote }) =&gt; {
        <span class="hljs-keyword">const</span> name = <span class="hljs-keyword">await</span> remote.findById(<span class="hljs-string">'nameField'</span>);
        <span class="hljs-keyword">await</span> name.click();
        <span class="hljs-keyword">await</span> name.type(<span class="hljs-string">'Elaine'</span>);

        <span class="hljs-keyword">const</span> button = <span class="hljs-keyword">await</span> remote.findByCssSelector(<span class="hljs-string">'#loginForm input[type=submit]'</span>);
        <span class="hljs-keyword">await</span> button.click();

        <span class="hljs-keyword">const</span> greeting = <span class="hljs-keyword">await</span> remote.findById(<span class="hljs-string">'greeting'</span>);
        <span class="hljs-keyword">const</span> text = <span class="hljs-keyword">await</span> greeting.getVisibleText();

        assert.strictEqual(text, <span class="hljs-string">'Hello, Elaine!'</span>, <span class="hljs-string">'Greeting should be displayed when the form is submitted'</span>);
    });
});
</code></pre>
<p><em>Note: To learn which methods are available on the <code>remote</code> object, check Leadfoot’s <a href="https://theintern.github.io/leadfoot/Command.html">Command object documentation</a>.</em></p>
<p>In the code above, calling <code>remote.get</code> loads the HTML page we want to test into the browser. Then, we wait for the “loaded” CSS class to appear on the body, for a maximum of five seconds. Once this element exists, we go through the process of finding, clicking, and typing into elements. Finally, we retrieve the text from the greeting element and check it to confirm that it matches what was expected.</p>
<p>Now that this test module is complete, the final step is to add it to our Intern configuration in the special <code>functionalSuites</code> top-level property:</p>
<pre><code class="hljs language-json"><span class="hljs-string">"functionalSuites"</span>: <span class="hljs-string">"_dist/tests/functional/index.js"</span>,
</code></pre>
<p>Now if we go back and run the same <code>npm test</code> command from the end of Steps 2 and 3, we will see our unit tests running in both Node.js and Chrome, our functional tests running in Chrome, and all of them passing:</p>
<pre><code class="hljs"><span class="hljs-selector-tag">Listening</span> <span class="hljs-selector-tag">on</span> <span class="hljs-selector-tag">localhost</span><span class="hljs-selector-pseudo">:9000</span> (<span class="hljs-selector-tag">ws</span> 9001)
<span class="hljs-selector-tag">Tunnel</span> <span class="hljs-selector-tag">started</span>
✓ <span class="hljs-selector-tag">node</span> <span class="hljs-selector-tag">-</span> <span class="hljs-selector-tag">hello</span> <span class="hljs-selector-tag">-</span> <span class="hljs-selector-tag">greet</span> (0<span class="hljs-selector-class">.001s</span>)
<span class="hljs-selector-tag">No</span> <span class="hljs-selector-tag">unit</span> <span class="hljs-selector-tag">test</span> <span class="hljs-selector-tag">coverage</span> <span class="hljs-selector-tag">for</span> <span class="hljs-selector-tag">node</span>
<span class="hljs-selector-tag">node</span>: 1 <span class="hljs-selector-tag">passed</span>, 0 <span class="hljs-selector-tag">failed</span>

‣ <span class="hljs-selector-tag">Created</span> <span class="hljs-selector-tag">remote</span> <span class="hljs-selector-tag">session</span> <span class="hljs-selector-tag">chrome</span> 59<span class="hljs-selector-class">.0</span><span class="hljs-selector-class">.3071</span><span class="hljs-selector-class">.115</span> <span class="hljs-selector-tag">on</span> <span class="hljs-selector-tag">MAC</span> (<span class="hljs-selector-tag">f1bffddb-f4ae-46ba-8633-2357f925939d</span>)
✓ <span class="hljs-selector-tag">chrome</span> 59<span class="hljs-selector-class">.0</span><span class="hljs-selector-class">.3071</span><span class="hljs-selector-class">.115</span> <span class="hljs-selector-tag">on</span> <span class="hljs-selector-tag">MAC</span> <span class="hljs-selector-tag">-</span> <span class="hljs-selector-tag">hello</span> <span class="hljs-selector-tag">-</span> <span class="hljs-selector-tag">greet</span> (0<span class="hljs-selector-class">.001s</span>)
✓ <span class="hljs-selector-tag">chrome</span> 59<span class="hljs-selector-class">.0</span><span class="hljs-selector-class">.3071</span><span class="hljs-selector-class">.115</span> <span class="hljs-selector-tag">on</span> <span class="hljs-selector-tag">MAC</span> <span class="hljs-selector-tag">-</span> <span class="hljs-selector-tag">index</span> <span class="hljs-selector-tag">-</span> <span class="hljs-selector-tag">greeting</span> <span class="hljs-selector-tag">form</span> (0<span class="hljs-selector-class">.236s</span>)
<span class="hljs-selector-tag">No</span> <span class="hljs-selector-tag">unit</span> <span class="hljs-selector-tag">test</span> <span class="hljs-selector-tag">coverage</span> <span class="hljs-selector-tag">for</span> <span class="hljs-selector-tag">chrome</span> 59<span class="hljs-selector-class">.0</span><span class="hljs-selector-class">.3071</span><span class="hljs-selector-class">.115</span> <span class="hljs-selector-tag">on</span> <span class="hljs-selector-tag">MAC</span>
<span class="hljs-selector-tag">chrome</span> 59<span class="hljs-selector-class">.0</span><span class="hljs-selector-class">.3071</span><span class="hljs-selector-class">.115</span> <span class="hljs-selector-tag">on</span> <span class="hljs-selector-tag">MAC</span>: 2 <span class="hljs-selector-tag">passed</span>, 0 <span class="hljs-selector-tag">failed</span>
<span class="hljs-selector-tag">TOTAL</span>: <span class="hljs-selector-tag">tested</span> 2 <span class="hljs-selector-tag">platforms</span>, 3 <span class="hljs-selector-tag">passed</span>, 0 <span class="hljs-selector-tag">failed</span>
</code></pre>
<h2>Step 5: Code coverage</h2>
<p>At this point, all of our unit and functional tests are passing. The next step is enabling code coverage. Intern is unique in that it not only runs unit and functional tests in one command, but it can also gather coverage information for both types of tests as well! To enable code coverage, set the <code>&quot;coverage&quot;</code> property of the top-level object in <code>intern.json</code> to a glob pattern (or an array of glob patterns) of compiled files to cover:</p>
<pre><code class="hljs language-json"><span class="hljs-string">"environments"</span>: { <span class="hljs-attr">"browserName"</span>: <span class="hljs-string">"chrome"</span> },
<span class="hljs-string">"coverage"</span>: [
    <span class="hljs-string">"_dist/src/**/*.js"</span>,
    <span class="hljs-string">"!_dist/src/system.config.js"</span>
]
</code></pre>
<p>This will tell Intern to get coverage information for all JavaScript files in <code>_dist/src</code> except for <code>_dist/src/system.config.js</code>. Now when we run <code>npm test</code>, the output will tell us the coverage we have:</p>
<pre><code class="hljs">Listening on localhost:9000 (ws 9001)
Tunnel started
✓ node - hello - greet (0.001s)

----------|<span class="hljs-string">----------</span>|<span class="hljs-string">----------</span>|<span class="hljs-string">----------</span>|<span class="hljs-string">----------</span>|<span class="hljs-string">----------------</span>|
File      |<span class="hljs-string">  % Stmts </span>|<span class="hljs-string"> % Branch </span>|<span class="hljs-string">  % Funcs </span>|<span class="hljs-string">  % Lines </span>|<span class="hljs-string">Uncovered Lines </span>|
----------|<span class="hljs-string">----------</span>|<span class="hljs-string">----------</span>|<span class="hljs-string">----------</span>|<span class="hljs-string">----------</span>|<span class="hljs-string">----------------</span>|
All files |<span class="hljs-string">      100 </span>|<span class="hljs-string">      100 </span>|<span class="hljs-string">      100 </span>|<span class="hljs-string">      100 </span>|<span class="hljs-string">                </span>|
 hello.ts |<span class="hljs-string">      100 </span>|<span class="hljs-string">      100 </span>|<span class="hljs-string">      100 </span>|<span class="hljs-string">      100 </span>|<span class="hljs-string">                </span>|
----------|<span class="hljs-string">----------</span>|<span class="hljs-string">----------</span>|<span class="hljs-string">----------</span>|<span class="hljs-string">----------</span>|<span class="hljs-string">----------------</span>|
node: 1 passed, 0 failed

‣ Created remote session chrome 59.0.3071.115 on MAC (dbc5f5cc-2f89-43e1-b062-7df608334314)
✓ chrome 59.0.3071.115 on MAC - hello - greet (0.001s)
✓ chrome 59.0.3071.115 on MAC - index - greeting form (0.231s)

----------|<span class="hljs-string">----------</span>|<span class="hljs-string">----------</span>|<span class="hljs-string">----------</span>|<span class="hljs-string">----------</span>|<span class="hljs-string">----------------</span>|
File      |<span class="hljs-string">  % Stmts </span>|<span class="hljs-string"> % Branch </span>|<span class="hljs-string">  % Funcs </span>|<span class="hljs-string">  % Lines </span>|<span class="hljs-string">Uncovered Lines </span>|
----------|<span class="hljs-string">----------</span>|<span class="hljs-string">----------</span>|<span class="hljs-string">----------</span>|<span class="hljs-string">----------</span>|<span class="hljs-string">----------------</span>|
All files |<span class="hljs-string">      100 </span>|<span class="hljs-string">      100 </span>|<span class="hljs-string">      100 </span>|<span class="hljs-string">      100 </span>|<span class="hljs-string">                </span>|
 hello.ts |<span class="hljs-string">      100 </span>|<span class="hljs-string">      100 </span>|<span class="hljs-string">      100 </span>|<span class="hljs-string">      100 </span>|<span class="hljs-string">                </span>|
----------|<span class="hljs-string">----------</span>|<span class="hljs-string">----------</span>|<span class="hljs-string">----------</span>|<span class="hljs-string">----------</span>|<span class="hljs-string">----------------</span>|
chrome 59.0.3071.115 on MAC: 2 passed, 0 failed

Total coverage
----------|<span class="hljs-string">----------</span>|<span class="hljs-string">----------</span>|<span class="hljs-string">----------</span>|<span class="hljs-string">----------</span>|<span class="hljs-string">----------------</span>|
File      |<span class="hljs-string">  % Stmts </span>|<span class="hljs-string"> % Branch </span>|<span class="hljs-string">  % Funcs </span>|<span class="hljs-string">  % Lines </span>|<span class="hljs-string">Uncovered Lines </span>|
----------|<span class="hljs-string">----------</span>|<span class="hljs-string">----------</span>|<span class="hljs-string">----------</span>|<span class="hljs-string">----------</span>|<span class="hljs-string">----------------</span>|
All files |<span class="hljs-string">      100 </span>|<span class="hljs-string">      100 </span>|<span class="hljs-string">      100 </span>|<span class="hljs-string">      100 </span>|<span class="hljs-string">                </span>|
 hello.ts |<span class="hljs-string">      100 </span>|<span class="hljs-string">      100 </span>|<span class="hljs-string">      100 </span>|<span class="hljs-string">      100 </span>|<span class="hljs-string">                </span>|
 main.ts  |<span class="hljs-string">      100 </span>|<span class="hljs-string">      100 </span>|<span class="hljs-string">      100 </span>|<span class="hljs-string">      100 </span>|<span class="hljs-string">                </span>|
----------|<span class="hljs-string">----------</span>|<span class="hljs-string">----------</span>|<span class="hljs-string">----------</span>|<span class="hljs-string">----------</span>|<span class="hljs-string">----------------</span>|
TOTAL: tested 2 platforms, 3 passed, 0 failed
</code></pre>
<p>One thing to note: Intern (via Istanbul) automatically remaps the coverage information back to our source files using source maps. We can see that the unit tests only report coverage for <code>hello.ts</code>, but our functional test - since it exercises the entire application - reports coverage for <code>main.ts</code> as well.</p>
<p>Intern also allows us to output an HTML coverage report to see graphically which lines have been exercised by our tests. To enable this feature, add the <code>htmlcoverage</code> reporter in the top-level object of <code>intern.json</code>:</p>
<pre><code class="hljs language-json"><span class="hljs-string">"reporters+"</span>: <span class="hljs-string">"htmlcoverage"</span>
</code></pre>
<p>As you can see, instead of using <code>&quot;reporters&quot;</code>, we have used <code>&quot;reporters+&quot;</code>. This will add <code>&quot;htmlcoverage&quot;</code> to the default array of reporters instead of overriding it. When we run <code>npm test</code> we’ll still see the same output as before in the console, and we will also have an HTML report in <code>intern-tutorial/coverage/</code>.</p>
<h2>Step 6: Remote testing</h2>
<p>At this point, all our tests are written and running in Node.js and Chrome. The only thing that’s left to do is to run all our tests on all the platforms we want to support. We'll do this by setting up a <code>browserstack</code> configuration within <code>intern.json</code> to run our tests with BrowserStack:</p>
<pre><code class="hljs language-json"><span class="hljs-string">"reporters+"</span>: <span class="hljs-string">"htmlcoverage"</span>,
<span class="hljs-string">"configs"</span>: {
    <span class="hljs-attr">"browserstack"</span>: {
        <span class="hljs-attr">"tunnel"</span>: <span class="hljs-string">"browserstack"</span>,
        <span class="hljs-attr">"maxConcurrency"</span>: <span class="hljs-number">2</span>,
        <span class="hljs-attr">"capabilities"</span>: {
            <span class="hljs-attr">"idle-timeout"</span>: <span class="hljs-number">60</span>,
            <span class="hljs-attr">"fixSessionCapabilities"</span>: <span class="hljs-string">"no-detect"</span>
        },
        <span class="hljs-attr">"environments"</span>: [
            { <span class="hljs-attr">"browser"</span>: <span class="hljs-string">"internet explorer"</span>, <span class="hljs-attr">"version"</span>: [ <span class="hljs-string">"10"</span>, <span class="hljs-string">"11"</span> ] },
            { <span class="hljs-attr">"browser"</span>: <span class="hljs-string">"firefox"</span>, <span class="hljs-attr">"version"</span>: [ <span class="hljs-string">"latest"</span> ], <span class="hljs-attr">"platform"</span>: [ <span class="hljs-string">"WINDOWS"</span>, <span class="hljs-string">"MAC"</span> ] },
            { <span class="hljs-attr">"browser"</span>: <span class="hljs-string">"chrome"</span>, <span class="hljs-attr">"version"</span>: [ <span class="hljs-string">"latest"</span> ], <span class="hljs-attr">"platform"</span>: [ <span class="hljs-string">"WINDOWS"</span>, <span class="hljs-string">"MAC"</span> ] },
            { <span class="hljs-attr">"browser"</span>: <span class="hljs-string">"safari"</span>, <span class="hljs-attr">"version"</span>: [ <span class="hljs-string">"9"</span>, <span class="hljs-string">"10"</span> ] }
        ]
    }
}
</code></pre>
<p>This sets up a child configuration named <code>browserstack</code> with our environments and tunnel. Intern will use this information to communicate with our remote testing service (in this case, BrowserStack) to run our unit and functional tests in all of the browsers we specified in our <code>environments</code> array, reporting back test results and coverage for each browser. Since we are using BrowserStack, we will need to provide our credentials and our child configuration name:</p>
<pre><code class="hljs language-bash">BROWSERSTACK_USERNAME=&lt;your username&gt; BROWSERSTACK_ACCESS_KEY=&lt;your access key&gt; npm <span class="hljs-built_in">test</span> config=@browserstack
</code></pre>
<p>You can also specify your username and access key on the <code>tunnelOptions</code> object in your Intern configuration, using the <code>username</code> and <code>apiKey</code> keys, if you don’t want to put them on the command line:</p>
<pre><code class="hljs language-json">      <span class="hljs-string">"tunnel"</span>: <span class="hljs-string">"browserstack"</span>,
      <span class="hljs-string">"tunnelOptions"</span>: {
        <span class="hljs-attr">"username"</span>: <span class="hljs-string">"&lt;your username&gt;"</span>,
        <span class="hljs-attr">"apiKey"</span>: <span class="hljs-string">"&lt;your access key&gt;"</span>
      },
      <span class="hljs-string">"maxConcurrency"</span>: <span class="hljs-number">2</span>,
</code></pre>
<p>However, keep in mind that keeping this information in a configuration file can expose your username and access key to others if the file is checked into a public repository.</p>
<p>If everything was done correctly, you should see the results of the test run being output to your terminal:</p>
<pre><code class="hljs">Listening on localhost:9000 (ws 9001)
Tunnel started
✓ node - hello - greet (0.001s)

----------|<span class="hljs-string">----------</span>|<span class="hljs-string">----------</span>|<span class="hljs-string">----------</span>|<span class="hljs-string">----------</span>|<span class="hljs-string">----------------</span>|
File      |<span class="hljs-string">  % Stmts </span>|<span class="hljs-string"> % Branch </span>|<span class="hljs-string">  % Funcs </span>|<span class="hljs-string">  % Lines </span>|<span class="hljs-string">Uncovered Lines </span>|
----------|<span class="hljs-string">----------</span>|<span class="hljs-string">----------</span>|<span class="hljs-string">----------</span>|<span class="hljs-string">----------</span>|<span class="hljs-string">----------------</span>|
All files |<span class="hljs-string">      100 </span>|<span class="hljs-string">      100 </span>|<span class="hljs-string">      100 </span>|<span class="hljs-string">      100 </span>|<span class="hljs-string">                </span>|
 hello.ts |<span class="hljs-string">      100 </span>|<span class="hljs-string">      100 </span>|<span class="hljs-string">      100 </span>|<span class="hljs-string">      100 </span>|<span class="hljs-string">                </span>|
----------|<span class="hljs-string">----------</span>|<span class="hljs-string">----------</span>|<span class="hljs-string">----------</span>|<span class="hljs-string">----------</span>|<span class="hljs-string">----------------</span>|
node: 1 passed, 0 failed

‣ Created remote session internet explorer 10 on WINDOWS (2ebde91d356d8dd326514caddc3e600a0aeb58f6)
✓ internet explorer 10 on WINDOWS - hello - greet (0s)
✓ internet explorer 10 on WINDOWS - index - greeting form (1.832s)

----------|<span class="hljs-string">----------</span>|<span class="hljs-string">----------</span>|<span class="hljs-string">----------</span>|<span class="hljs-string">----------</span>|<span class="hljs-string">----------------</span>|
File      |<span class="hljs-string">  % Stmts </span>|<span class="hljs-string"> % Branch </span>|<span class="hljs-string">  % Funcs </span>|<span class="hljs-string">  % Lines </span>|<span class="hljs-string">Uncovered Lines </span>|
----------|<span class="hljs-string">----------</span>|<span class="hljs-string">----------</span>|<span class="hljs-string">----------</span>|<span class="hljs-string">----------</span>|<span class="hljs-string">----------------</span>|
All files |<span class="hljs-string">      100 </span>|<span class="hljs-string">      100 </span>|<span class="hljs-string">      100 </span>|<span class="hljs-string">      100 </span>|<span class="hljs-string">                </span>|
 hello.ts |<span class="hljs-string">      100 </span>|<span class="hljs-string">      100 </span>|<span class="hljs-string">      100 </span>|<span class="hljs-string">      100 </span>|<span class="hljs-string">                </span>|
----------|<span class="hljs-string">----------</span>|<span class="hljs-string">----------</span>|<span class="hljs-string">----------</span>|<span class="hljs-string">----------</span>|<span class="hljs-string">----------------</span>|
internet explorer 10 on WINDOWS: 2 passed, 0 failed

‣ Created remote session internet explorer 11 on WINDOWS (f8ab8d0a315172af0337b9fcd91ae3457098a906)

‣ Created remote session firefox on windows_nt 6.3 (1cb854da49290a1818d8147244c069504c51775b)
✓ internet explorer 11 on WINDOWS - hello - greet (0s)
✓ firefox on windows_nt 6.3 - hello - greet (0.001s)
✓ internet explorer 11 on WINDOWS - index - greeting form (3.618s)

----------|<span class="hljs-string">----------</span>|<span class="hljs-string">----------</span>|<span class="hljs-string">----------</span>|<span class="hljs-string">----------</span>|<span class="hljs-string">----------------</span>|
File      |<span class="hljs-string">  % Stmts </span>|<span class="hljs-string"> % Branch </span>|<span class="hljs-string">  % Funcs </span>|<span class="hljs-string">  % Lines </span>|<span class="hljs-string">Uncovered Lines </span>|
----------|<span class="hljs-string">----------</span>|<span class="hljs-string">----------</span>|<span class="hljs-string">----------</span>|<span class="hljs-string">----------</span>|<span class="hljs-string">----------------</span>|
All files |<span class="hljs-string">      100 </span>|<span class="hljs-string">      100 </span>|<span class="hljs-string">      100 </span>|<span class="hljs-string">      100 </span>|<span class="hljs-string">                </span>|
 hello.ts |<span class="hljs-string">      100 </span>|<span class="hljs-string">      100 </span>|<span class="hljs-string">      100 </span>|<span class="hljs-string">      100 </span>|<span class="hljs-string">                </span>|
----------|<span class="hljs-string">----------</span>|<span class="hljs-string">----------</span>|<span class="hljs-string">----------</span>|<span class="hljs-string">----------</span>|<span class="hljs-string">----------------</span>|

...

Total coverage
----------|<span class="hljs-string">----------</span>|<span class="hljs-string">----------</span>|<span class="hljs-string">----------</span>|<span class="hljs-string">----------</span>|<span class="hljs-string">----------------</span>|
File      |<span class="hljs-string">  % Stmts </span>|<span class="hljs-string"> % Branch </span>|<span class="hljs-string">  % Funcs </span>|<span class="hljs-string">  % Lines </span>|<span class="hljs-string">Uncovered Lines </span>|
----------|<span class="hljs-string">----------</span>|<span class="hljs-string">----------</span>|<span class="hljs-string">----------</span>|<span class="hljs-string">----------</span>|<span class="hljs-string">----------------</span>|
All files |<span class="hljs-string">      100 </span>|<span class="hljs-string">      100 </span>|<span class="hljs-string">      100 </span>|<span class="hljs-string">      100 </span>|<span class="hljs-string">                </span>|
 hello.ts |<span class="hljs-string">      100 </span>|<span class="hljs-string">      100 </span>|<span class="hljs-string">      100 </span>|<span class="hljs-string">      100 </span>|<span class="hljs-string">                </span>|
 main.ts  |<span class="hljs-string">      100 </span>|<span class="hljs-string">      100 </span>|<span class="hljs-string">      100 </span>|<span class="hljs-string">      100 </span>|<span class="hljs-string">                </span>|
----------|<span class="hljs-string">----------</span>|<span class="hljs-string">----------</span>|<span class="hljs-string">----------</span>|<span class="hljs-string">----------</span>|<span class="hljs-string">----------------</span>|
TOTAL: tested 9 platforms, 17 passed, 0 failed
</code></pre>
<p>When you start testing your actual application, it’s a good idea to use Intern in conjunction with a continuous integration service like <a href="https://travis-ci.org">Travis CI</a> or <a href="https://jenkins.io">Jenkins</a> so you know that the code in your repository is passing its tests at all times, and so you can monitor your code coverage figures. Instructions are available in the <a href="https://github.com/theintern/intern/blob/master/docs/ci.md">continuous integration section</a> of the documentation for running Intern with Jenkins, Travis CI, and TeamCity.</p>
<p>If you’d like a complete working copy of this project with Intern already configured and the tests already written, <a href="https://github.com/theintern/intern-tutorial/archive/completed.zip">download the completed-tutorial branch</a>. If you have any questions, please <a href="https://github.com/theintern/intern/blob/master/docs/help.md">let us know</a>. Pull requests to enhance this tutorial are also accepted and appreciated!</p>
<p>Once you’re ready to dive in and start writing tests for your own application, take a look at <a href="https://github.com/theintern/intern#more-information">Intern’s project documentation</a>. It contains references and documentation for all of the features of Intern.</p>
<p>Happy testing!</p>

			</div>
		</div>
		<footer class="footer">
	<div class="container">
		<div class="level">
			<div class="level-left">
				<div class="level-item">
					<img src="/images/intern-logo-footer.svg" alt="Intern">
				</div>
				<div class="level-item">
					<span class="copyright">
						&copy; 2017 <a href="https://www.sitepen.com">SitePen, Inc.</a>
					</span>
				</div>
				<div class="level-item">
					<span>Intern is a <a href="http://js.foundation">JS Foundation</a> project.</span>
				</div>
				<div class="level-item">
					<span><a href="https://github.com/theintern/intern/blob/master/LICENSE">New BSD</a> licensed.</span>
				</div>
			</div>
		</div>
	</div>
</footer>
	</body>
</html>